# ๐จ DIAGRAMA ER VISUAL SIMPLIFICADO

Este arquivo contรฉm representaรงรตes visuais simplificadas do modelo de dados.

---

## ๐ Diagrama Principal - Visรฃo Completa

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        GAMEVAULT - MODELO ENTIDADE-RELACIONAMENTO              โ
โ                                  (Notaรงรฃo Peter Chen)                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


                            โโโโโโโโโโโโโโโโโโโโโ
                            โ     USUARIO       โ
                            โโโโโโโโโโโโโโโโโโโโโ
                            โ โข id_usuario (PK) โ
                            โ โข nome            โ
                            โ โข email (UK)      โ
                            โ โข senha           โ
                            โ โข data_cadastro   โ
                            โ โข tipo_usuario    โ
                            โโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โ ISA
                                     โ
                    โโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโ
                    โ                                 โ
                    โผ                                 โผ
        โโโโโโโโโโโโโโโโโโโโโ           โโโโโโโโโโโโโโโโโโโโโ
        โ    JOGADOR        โ           โ  DESENVOLVEDOR    โ
        โโโโโโโโโโโโโโโโโโโโโ           โโโโโโโโโโโโโโโโโโโโโ
        โ โข id_jogador (PK) โ           โ โข id_desenv. (PK) โ
        โ โข nivel           โ           โ โข nome_estudio    โ
        โ โข xp              โ           โ โข website         โ
        โ โข data_nasc.      โ           โ โข cnpj (UK)       โ
        โ โข pais            โ           โ โข data_fundacao   โ
        โโโโโโโโโโโโโโโโโโโโโ           โโโโโโโโโโโโโโโโโโโโโ
                โ                                   โ
                โ                                   โ publica
                โ                                   โ   (1:N)
                โ                                   โผ
                โ                       โโโโโโโโโโโโโโโโโโโโโ
                โ                       โ       JOGO        โ
                โ                       โโโโโโโโโโโโโโโโโโโโโ
                โ                       โ โข id_jogo (PK)    โ
                โ                       โ โข titulo          โ
                โ                       โ โข descricao       โ
                โ                       โ โข preco           โ
                โ                       โ โข data_lanc.      โ
                โ                       โ โข classif_etaria  โ
                โ                       โ โข desenv_id (FK)  โ
                โ                       โ โข media_aval      โ
                โ                       โโโโโโโโโโโโโโโโโโโโโ
                โ                                   โ
                โ                                   โ
                โ                       โโโโโโโโโโโโโผโโโโโโโโโโโโ
                โ                       โ           โ           โ
                โ                   possui      possui     pertence
                โ                    (1:N)       (1:N)       (N:N)
                โ                       โ           โ           โ
                โ                       โผ           โผ           โผ
                โ               โโโโโโโโโโโโ  โโโโโโโโโโโโโ  โโโโโโโโโโโโ
                โ               โ   DLC    โ  โCONQUISTA  โ  โCATEGORIA โ
                โ               โโโโโโโโโโโโ  โโโโโโโโโโโโโ  โโโโโโโโโโโโ
                โ               โ โข id (PK)โ  โ โข id (PK) โ  โ โข id (PK)โ
                โ               โ โข nome   โ  โ โข nome    โ  โ โข nome   โ
                โ               โ โข desc   โ  โ โข desc    โ  โ โข desc   โ
                โ               โ โข preco  โ  โ โข xp_rec  โ  โโโโโโโโโโโโ
                โ               โ โข jogo_idโ  โ โข jogo_id โ
                โ               โโโโโโโโโโโโ  โโโโโโโโโโโโโ
                โ
                โ
                โ              โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโ
                โ              โ              โ              โ
                โ          realiza        avalia      desbloqueia
                โ           (1:N)         (N:N)         (N:N)
                โ              โ              โ              โ
                โ              โผ              โ              โ
                โ      โโโโโโโโโโโโโโโโ       โ              โ
                โ      โ   COMPRA     โ       โ              โ
                โ      โโโโโโโโโโโโโโโโ       โ              โ
                โ      โ โข id (PK)    โ       โ              โ
                โ      โ โข jogador_id โ       โ              โ
                โ      โ โข data_comp  โ       โ              โ
                โ      โ โข valor_tot  โ       โ              โ
                โ      โ โข metodo_pag โ       โ              โ
                โ      โโโโโโโโโโโโโโโโ       โ              โ
                โ              โ              โ              โ
                โ          contรฉm            โ              โ
                โ           (1:N)            โ              โ
                โ              โ              โ              โ
                โ              โผ              โผ              โผ
                โ      โโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโโ
                โโโโโโโถโ ITEM_COMPRA   โ  โAVALIACAO โ  โJOGADOR_   โ
                       โโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโ  โCONQUISTA  โ
                       โ โข id (PK)     โ  โ โข id (PK)โ  โโโโโโโโโโโโโ
                       โ โข compra_id   โ  โ โข jog_id โ  โ โข jog_id  โ
                       โ โข tipo_item   โ  โ โข jogo_idโ  โ โข conq_id โ
                       โ โข item_id     โ  โ โข nota   โ  โ โข data    โ
                       โ โข preco_pago  โ  โ โข coment โ  โโโโโโโโโโโโโ
                       โโโโโโโโโโโโโโโโโ  โ โข data   โ
                                          โโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

LEGENDA:
  โโโโโโโโโ  = Entidade
  โข campo  = Atributo
  (PK)     = Primary Key (Chave Primรกria)
  (FK)     = Foreign Key (Chave Estrangeira)
  (UK)     = Unique (Valor รบnico)
  โโโโโ    = Relacionamento
  ISA      = "ร um" (Especializaรงรฃo/Heranรงa)
  1:N      = Um para Muitos
  N:N      = Muitos para Muitos

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Diagrama de Fluxos de Dados

### Fluxo 1: Compra de Jogo

```
โโโโโโโโโโโ
โ JOGADOR โ
โโโโโโฌโโโโโ
     โ 1. Seleciona jogo
     โผ
โโโโโโโโโโโ      2. Verifica preรงo      โโโโโโโโ
โ  JOGO   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ DLC  โ
โโโโโโฌโโโโโ                              โโโโโโโโ
     โ
     โ 3. Aplica desconto (funรงรฃo)
     โผ
โโโโโโโโโโโโโโโโโโโ
โ calcular_       โ
โ desconto_       โ
โ jogador()       โ
โโโโโโฌโโโโโโโโโโโโโ
     โ
     โ 4. Cria transaรงรฃo
     โผ
โโโโโโโโโโโ
โ COMPRA  โ
โโโโโโฌโโโโโ
     โ
     โ 5. Adiciona itens
     โผ
โโโโโโโโโโโโโโโโ
โ ITEM_COMPRA  โ
โโโโโโโโโโโโโโโโ
```

### Fluxo 2: Sistema de Conquistas

```
โโโโโโโโโโโ
โ JOGADOR โ
โโโโโโฌโโโโโ
     โ 1. Joga
     โผ
โโโโโโโโโโโ
โ  JOGO   โ
โโโโโโฌโโโโโ
     โ 2. Atende requisito
     โผ
โโโโโโโโโโโโโโโ
โ CONQUISTA   โ
โโโโโโฌโโโโโโโโโ
     โ 3. Desbloqueia
     โผ
โโโโโโโโโโโโโโโโโโโโ
โ JOGADOR_         โ
โ CONQUISTA        โ
โโโโโโฌโโโโโโโโโโโโโโ
     โ
     โ 4. TRIGGER dispara
     โผ
โโโโโโโโโโโโโโโโโโโโ
โ adicionar_xp_    โ
โ conquista()      โ
โโโโโโฌโโโโโโโโโโโโโโ
     โ
     โ 5. Atualiza XP e nรญvel
     โผ
โโโโโโโโโโโ
โ JOGADOR โ (XP + nรญvel atualizados)
โโโโโโโโโโโ
```

### Fluxo 3: Sistema de Avaliaรงรตes

```
โโโโโโโโโโโ
โ JOGADOR โ
โโโโโโฌโโโโโ
     โ 1. Compra jogo
     โผ
โโโโโโโโโโโ
โ  JOGO   โ
โโโโโโฌโโโโโ
     โ 2. Joga e avalia
     โผ
โโโโโโโโโโโโโโโ
โ AVALIACAO   โ
โโโโโโฌโโโโโโโโโ
     โ
     โ 3. TRIGGER dispara
     โผ
โโโโโโโโโโโโโโโโโโโโโโโโ
โ atualizar_media_     โ
โ avaliacoes()         โ
โโโโโโฌโโโโโโโโโโโโโโโโโโ
     โ
     โ 4. Recalcula mรฉdia
     โผ
โโโโโโโโโโโ
โ  JOGO   โ (media_avaliacoes atualizada)
โโโโโโโโโโโ
```

---

## ๐ Diagrama de Cardinalidades

### Relacionamentos 1:N

```
DESENVOLVEDOR โโโโโโฌโโโโโโโโถ JOGO
     (1)           โ         (N)
                   โ
                   โโ Um desenvolvedor publica vรกrios jogos
                      Um jogo tem um desenvolvedor


JOGO โโโโโโฌโโโโโโโโถ DLC
   (1)    โ         (N)
          โ
          โโ Um jogo tem vรกrias DLCs
             Uma DLC pertence a um jogo


JOGO โโโโโโฌโโโโโโโโถ CONQUISTA
   (1)    โ         (N)
          โ
          โโ Um jogo tem vรกrias conquistas
             Uma conquista pertence a um jogo


JOGADOR โโโโโโฌโโโโโโโโถ COMPRA
     (1)     โ         (N)
             โ
             โโ Um jogador faz vรกrias compras
                Uma compra รฉ de um jogador


COMPRA โโโโโโฌโโโโโโโโถ ITEM_COMPRA
    (1)     โ         (N)
            โ
            โโ Uma compra tem vรกrios itens
               Um item pertence a uma compra
```

### Relacionamentos N:N

```
JOGO โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโถ CATEGORIA
 (N)      JOGO_CATEGORIA (Associativa)      (N)

โข Um jogo pode ter vรกrias categorias
โข Uma categoria pode ter vรกrios jogos
โข Tabela intermediรกria: JOGO_CATEGORIA


JOGADOR โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโถ JOGO
   (N)     AVALIACAO (com atributos)    (N)

โข Um jogador pode avaliar vรกrios jogos
โข Um jogo pode ser avaliado por vรกrios jogadores
โข Tabela intermediรกria: AVALIACAO (nota, comentario, data)
โข Restriรงรฃo: Um jogador avalia cada jogo apenas uma vez


JOGADOR โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโถ CONQUISTA
   (N)     JOGADOR_CONQUISTA           (N)

โข Um jogador pode desbloquear vรกrias conquistas
โข Uma conquista pode ser desbloqueada por vรกrios jogadores
โข Tabela intermediรกria: JOGADOR_CONQUISTA (data_desbloqueio)
```

---

## ๐๏ธ Diagrama de Estrutura de Tabelas

### Grupo 1: Usuรกrios

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         USUARIO                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ PK  id_usuario    SERIAL       โ
โ     nome          VARCHAR(100) โ
โ UK  email         VARCHAR(150) โ
โ     senha         VARCHAR(255) โ
โ     data_cadastro TIMESTAMP    โ
โ     tipo_usuario  VARCHAR(20)  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ
              โ ISA
              โ
    โโโโโโโโโโโดโโโโโโโโโโโ
    โ                    โ
    โผ                    โผ
โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโ
โ   JOGADOR        โ  โ  DESENVOLVEDOR     โ
โโโโโโโโโโโโโโโโโโโโค  โโโโโโโโโโโโโโโโโโโโโโค
โPK,FK id_jogador  โ  โPK,FK id_desenv.    โ
โ     nivel        โ  โ     nome_estudio   โ
โ     xp           โ  โ     website        โ
โ     data_nasc.   โ  โ UK  cnpj           โ
โ     pais         โ  โ     data_fundacao  โ
โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโ
```

### Grupo 2: Catรกlogo

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         JOGO                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ PK  id_jogo          SERIAL    โ
โ     titulo           VARCHAR   โ
โ     descricao        TEXT      โ
โ     preco            DECIMAL   โ
โ     data_lancamento  DATE      โ
โ     classif_etaria   VARCHAR   โ
โ FK  desenvolvedor_id INTEGER   โ
โ     media_avaliacoes DECIMAL   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ
        โโโโโโโผโโโโโโ
        โ     โ     โ
        โผ     โผ     โผ
    โโโโโโโ โโโโโโ โโโโโโโโโโ
    โ DLC โ โCONQโ โCATEG   โ
    โโโโโโโ โโโโโโ โโโโโโโโโโ
```

### Grupo 3: Transaรงรตes

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         COMPRA                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ PK  id_compra       SERIAL     โ
โ FK  jogador_id      INTEGER    โ
โ     data_compra     TIMESTAMP  โ
โ     valor_total     DECIMAL    โ
โ     metodo_pagto    VARCHAR    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ
              โ 1:N
              โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      ITEM_COMPRA               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ PK  id_item         SERIAL     โ
โ FK  compra_id       INTEGER    โ
โ     tipo_item       VARCHAR    โ
โ     item_id         INTEGER    โ
โ     preco_pago      DECIMAL    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ Diagrama de Dependรชncias

```
                    USUARIO
                       โ
        โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
        โ                             โ
    JOGADOR                    DESENVOLVEDOR
        โ                             โ
        โ                             โ
        โ                           JOGO
        โ                             โ
        โ                โโโโโโโโโโโโโโผโโโโโโโโโโโโโ
        โ                โ            โ            โ
        โ              DLC        CONQUISTA    CATEGORIA
        โ                            โ
        โ                            โ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
        โ                            โ
    COMPRA                  JOGADOR_CONQUISTA
        โ
    ITEM_COMPRA
        โ
    AVALIACAO
```

**Ordem de Criaรงรฃo** (Top-down):

1. USUARIO
2. JOGADOR, DESENVOLVEDOR
3. CATEGORIA, JOGO
4. DLC, CONQUISTA, JOGO_CATEGORIA
5. COMPRA, AVALIACAO
6. ITEM_COMPRA, JOGADOR_CONQUISTA

---

## ๐ Diagrama de Triggers

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    TRIGGER 1                            โ
โ                                                         โ
โ  INSERT/UPDATE/DELETE em AVALIACAO                     โ
โ                    โ                                    โ
โ                    โผ                                    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ  โ atualizar_media_avaliacoes()             โ          โ
โ  โ                                          โ          โ
โ  โ 1. Calcula AVG(nota) para o jogo        โ          โ
โ  โ 2. Atualiza JOGO.media_avaliacoes       โ          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ                    โ                                    โ
โ                    โผ                                    โ
โ             JOGO atualizado                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    TRIGGER 2                            โ
โ                                                         โ
โ  INSERT em JOGADOR_CONQUISTA                           โ
โ                    โ                                    โ
โ                    โผ                                    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ  โ adicionar_xp_conquista()                 โ          โ
โ  โ                                          โ          โ
โ  โ 1. Busca xp_recompensa da conquista     โ          โ
โ  โ 2. Adiciona XP ao jogador               โ          โ
โ  โ 3. Calcula novo nรญvel (xp/100 + 1)      โ          โ
โ  โ 4. Atualiza JOGADOR.nivel               โ          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ                    โ                                    โ
โ                    โผ                                    โ
โ             JOGADOR atualizado                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐จ Diagrama de Cores (Organizaรงรฃo Visual)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAMADA DE USUรRIOS                                  โ
โ โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ      โ
โ โ USUARIO  โ  โ JOGADOR  โ  โDESENVOLVEDOR โ      โ
โ โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAMADA DE CATรLOGO                                  โ
โ โโโโโโโโ  โโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ    โ
โ โ JOGO โ  โ DLC  โ  โCONQUISTA โ  โCATEGORIA โ    โ
โ โโโโโโโโ  โโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAMADA DE TRANSAรรES                                โ
โ โโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโ      โ
โ โ COMPRA   โ  โITEM_COMPRA  โ  โAVALIACAO  โ      โ
โ โโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAMADA DE ASSOCIAรรES                               โ
โ โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ             โ
โ โJOGO_CATEG.   โ  โJOGADOR_CONQUISTA โ             โ
โ โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Diagrama de Normalizaรงรฃo

### Antes da Normalizaรงรฃo (Problemas)

```
โ COMPRA_DESNORMALIZADA
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ id_compra | jogador_nome | jogo_titulo | preco | ...  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1         | Carlos       | Cyber War   | 199.90| ...  โ
โ 2         | Carlos       | Fantasy VII | 249.90| ...  โ
โ 3         | Ana          | Terror      | 89.90 | ...  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Problemas:
โข Redundรขncia: Nome do jogador repetido
โข Anomalia de atualizaรงรฃo: Mudar nome afeta mรบltiplas linhas
โข Anomalia de exclusรฃo: Deletar compra perde info do jogador
```

### Apรณs Normalizaรงรฃo (3FN)

```
โ ESTRUTURA NORMALIZADA

JOGADOR
โโโโโโโโโโโโโโโโโโโโ
โ id_jogador (PK)  โ
โ nome             โ
โโโโโโโโโโโโโโโโโโโโ
         โฒ
         โ FK
         โ
COMPRA
โโโโโโโโโโโโโโโโโโโโ
โ id_compra (PK)   โ
โ jogador_id (FK)  โโโโ
โ data_compra      โ  โ
โ valor_total      โ  โ
โโโโโโโโโโโโโโโโโโโโ  โ
         โฒ            โ
         โ FK         โ
         โ            โ
ITEM_COMPRA          โ
โโโโโโโโโโโโโโโโโโโโ โ
โ id_item (PK)     โ โ
โ compra_id (FK)   โโโ
โ tipo_item        โ
โ item_id          โ
โ preco_pago       โ
โโโโโโโโโโโโโโโโโโโโ

Vantagens:
โ Sem redundรขncia
โ Integridade garantida
โ Fรกcil manutenรงรฃo
โ Escalรกvel
```

---

**Diagramas criados para facilitar o entendimento do modelo de dados GameVault**
